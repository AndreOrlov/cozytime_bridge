# 🎯 CozyTime BLE Bridge

[![ESPHome](https://img.shields.io/badge/ESPHome-2023.x-blue.svg)](https://esphome.io/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Version](https://img.shields.io/badge/version-2.0-green.svg)](PROTOCOL_ANALYSIS.md)

> ESP32 BLE bridge для интеграции датчика CozyTime с Home Assistant через ESPHome

## ✨ Возможности

- 🌡️ **Температура** (16-бит, RMS = 0.064°F)
- 💧 **Влажность** (%)  
- 🔋 **Батарея** (%)
- 📶 **RSSI** (сила сигнала)
- ⏰ **Timestamp** последнего измерения
- 🔍 **Raw packet** в hex формате

## 📊 Точность

| Параметр | Значение |
|----------|----------|
| RMS ошибка | 0.064°F (0.035°C) |
| Макс. ошибка | 0.15°F (0.08°C) |
| R² | 0.999995 |
| Диапазон | -40°F до 91.2°F |
| Калибровка | 18 точек |

## 🔬 Датчик

**SHT40/SHT60** от Sensirion  
📄 [Datasheet](docs/SHT40%20Datasheet.pdf)

## 📚 Документация

- 📖 [README.md](README.md) - Основная документация
- 🔍 [PROTOCOL_ANALYSIS.md](PROTOCOL_ANALYSIS.md) - Детальный анализ протокола
- 📂 [PROJECT_STRUCTURE.md](PROJECT_STRUCTURE.md) - Структура проекта
- 📄 [docs/](docs/) - Datasheet и справка

## 🚀 Быстрый старт

```bash
# Клонировать репозиторий
git clone <repo-url>

# Настроить secrets.yaml
cp secrets.yaml.example secrets.yaml
nano secrets.yaml

# Прошить ESP32
esphome run cozytime_bridge.yaml
```

## 🏗️ Roadmap

- [x] Полный парсинг BLE протокола
- [x] Калибровка температуры
- [x] Timestamp в пакете
- [ ] Миграция на MQTT
- [ ] Custom ESPHome component
- [ ] Поддержка множественных датчиков

## 📄 Лицензия

MIT License - см. [LICENSE](LICENSE)

## 🙏 Благодарности

Проект создан путем реверс-инжиниринга протокола CozyTime BLE.

---

**v2.0** | 8 декабря 2025 | [@andreyorlov](https://github.com/andreyorlov)
